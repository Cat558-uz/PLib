-- Mini GUI Library @uniquadev
-- baseada no seu script G2L

local MiniLib = {}
MiniLib.__index = MiniLib

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local CollectionService = game:GetService("CollectionService")

function MiniLib:CreateWindow(titleText)
    local selfObj = {}
    setmetatable(selfObj, MiniLib)

    -- ScreenGui
    selfObj.ScreenGui = Instance.new("ScreenGui")
    selfObj.ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
    selfObj.ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    CollectionService:AddTag(selfObj.ScreenGui, "main")

    -- Main Frame
    selfObj.Frame = Instance.new("Frame", selfObj.ScreenGui)
    selfObj.Frame.Size = UDim2.new(0, 256, 0, 280)
    selfObj.Frame.Position = UDim2.new(0, 244, 0, -14)
    selfObj.Frame.BackgroundColor3 = Color3.fromRGB(255,255,255)
    selfObj.Frame.BackgroundTransparency = 0.7
    selfObj.Frame.BorderSizePixel = 0
    Instance.new("UICorner", selfObj.Frame)

    -- Title
    local title = Instance.new("TextLabel", selfObj.Frame)
    title.Size = UDim2.new(0, 332, 0, 26)
    title.Position = UDim2.new(0, -40, 0, 2)
    title.BackgroundTransparency = 1
    title.Text = titleText or "MiniLib Window"
    title.TextSize = 18
    title.TextColor3 = Color3.fromRGB(0,0,0)
    title.FontFace = Font.new([[rbxasset://fonts/families/FredokaOne.json]])

    -- Container Frame
    selfObj.Container = Instance.new("Frame", selfObj.Frame)
    selfObj.Container.Size = UDim2.new(0, 240, 0, 250)
    selfObj.Container.Position = UDim2.new(0, 8, 0, 26)
    selfObj.Container.BackgroundColor3 = Color3.fromRGB(87,87,87)
    selfObj.Container.BackgroundTransparency = 0.7
    selfObj.Container.BorderSizePixel = 0
    Instance.new("UICorner", selfObj.Container)
    local list = Instance.new("UIListLayout", selfObj.Container)
    list.Padding = UDim.new(0,4)

    -- Draggable
    local drag = Instance.new("UIDragDetector", selfObj.Frame)
    drag.DragUDim2 = UDim2.new(0, -23, 0, -13)

    return selfObj
end

-- Add a button
function MiniLib:AddButton(text, callback, description)
    local btn = Instance.new("TextButton", self.Container)
    btn.Size = UDim2.new(0, 240, 0, 34)
    btn.BackgroundColor3 = Color3.fromRGB(114,114,114)
    btn.BackgroundTransparency = 0.7
    btn.Text = text or "Button"
    btn.TextSize = 18
    btn.FontFace = Font.new([[rbxasset://fonts/families/FredokaOne.json]])
    btn.BorderSizePixel = 0
    Instance.new("UICorner", btn)
    if description then
        local desc = Instance.new("TextLabel", self.Container)
        desc.Size = UDim2.new(0, 240, 0, 20)
        desc.BackgroundColor3 = Color3.fromRGB(121,105,79)
        desc.BackgroundTransparency = 0.7
        desc.TextColor3 = Color3.fromRGB(0,0,0)
        desc.TextSize = 14
        desc.FontFace = Font.new([[rbxasset://fonts/families/Zekton.json]])
        desc.Text = description
        desc.BorderSizePixel = 0
        Instance.new("UICorner", desc)
    end
    btn.MouseButton1Click:Connect(function()
        if callback then callback() end
    end)
end

-- Add a toggle
function MiniLib:AddToggle(text, callback)
    local toggleFrame = Instance.new("TextButton", self.Container)
    toggleFrame.Size = UDim2.new(0, 240, 0, 34)
    toggleFrame.BackgroundColor3 = Color3.fromRGB(114,114,114)
    toggleFrame.BackgroundTransparency = 0.7
    toggleFrame.Text = text or "Toggle"
    toggleFrame.TextSize = 18
    toggleFrame.FontFace = Font.new([[rbxasset://fonts/families/FredokaOne.json]])
    toggleFrame.BorderSizePixel = 0
    local corner = Instance.new("UICorner", toggleFrame)
    corner.CornerRadius = UDim.new(0,4)

    local bar = Instance.new("Frame", toggleFrame)
    bar.Size = UDim2.new(0,70,0,26)
    bar.Position = UDim2.new(0,166,0,4)
    bar.BackgroundColor3 = Color3.fromRGB(117,132,122)
    Instance.new("UICorner", bar)

    local indicator = Instance.new("Frame", bar)
    indicator.Size = UDim2.new(0,24,0,22)
    indicator.Position = UDim2.new(0,44,0,2)
    indicator.BackgroundColor3 = Color3.fromRGB(98,129,95)
    Instance.new("UICorner", indicator)

    local state = false
    toggleFrame.MouseButton1Click:Connect(function()
        state = not state
        indicator.Position = state and UDim2.new(0,2,0,2) or UDim2.new(0,44,0,2)
        if callback then callback(state) end
    end)
end

-- Add a textbox
function MiniLib:AddTextbox(placeholder, callback)
    local tbBtn = Instance.new("TextButton", self.Container)
    tbBtn.Size = UDim2.new(0,168,0,34)
    tbBtn.BackgroundColor3 = Color3.fromRGB(114,114,114)
    tbBtn.BackgroundTransparency = 0.7
    tbBtn.BorderSizePixel = 0
    Instance.new("UICorner", tbBtn)

    local tb = Instance.new("TextBox", tbBtn)
    tb.Size = UDim2.new(0,64,0,32)
    tb.Position = UDim2.new(0,2,0,2)
    tb.Text = ""
    tb.PlaceholderText = placeholder or ""
    tb.BackgroundTransparency = 0.7
    tb.BorderSizePixel = 0
    Instance.new("UICorner", tb)

    tb.FocusLost:Connect(function()
        if callback then callback(tb.Text) end
    end)
end

return MiniLib
