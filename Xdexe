--// Serviços
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

--// GUI Base
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 220, 0, 250)
MainFrame.Position = UDim2.new(0.5, -110, 0.5, -125)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.BackgroundTransparency = 0.4
MainFrame.Active = true
MainFrame.Draggable = true

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 12)

--// Título
local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "Mini Lib"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18

--// Layout
local UIList = Instance.new("UIListLayout", MainFrame)
UIList.SortOrder = Enum.SortOrder.LayoutOrder
UIList.Padding = UDim.new(0, 5)
UIList.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIList.VerticalAlignment = Enum.VerticalAlignment.Top
Title.LayoutOrder = 0

--// Library
local Library = {}

--// Configurações gerais
function Library:SetTitle(text)
    Title.Text = text
end

function Library:SetSize(w, h)
    MainFrame.Size = UDim2.new(0, w, 0, h)
    MainFrame.Position = UDim2.new(0.5, -w/2, 0.5, -h/2)
end

--// Seções
function Library:AddSection(name)
    local Sec = Instance.new("TextLabel", MainFrame)
    Sec.Size = UDim2.new(0.9, 0, 0, 25)
    Sec.BackgroundTransparency = 1
    Sec.Text = "── "..name.." ──"
    Sec.TextColor3 = Color3.fromRGB(200, 200, 200)
    Sec.Font = Enum.Font.GothamBold
    Sec.TextSize = 14
    Sec.LayoutOrder = 1
end

--// Função util para criar descrição
local function AddDescription(parent, text)
    if not text then return end
    local Desc = Instance.new("TextLabel", parent)
    Desc.Size = UDim2.new(1, 0, 0, 15)
    Desc.BackgroundTransparency = 1
    Desc.Text = text
    Desc.TextColor3 = Color3.fromRGB(180, 180, 180)
    Desc.Font = Enum.Font.Gotham
    Desc.TextSize = 12
    Desc.TextXAlignment = Enum.TextXAlignment.Left
    return Desc
end

--// Botão
function Library:AddButton(data)
    local BtnFrame = Instance.new("Frame", MainFrame)
    BtnFrame.Size = UDim2.new(0.9, 0, 0, data.Description and 55 or 35)
    BtnFrame.BackgroundTransparency = 1
    BtnFrame.LayoutOrder = 1

    local Btn = Instance.new("TextButton", BtnFrame)
    Btn.Size = UDim2.new(1, 0, 0, 35)
    Btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    Btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    Btn.Font = Enum.Font.Gotham
    Btn.TextSize = 16
    Btn.Text = data.Name or "Button"

    local corner = Instance.new("UICorner", Btn)
    corner.CornerRadius = UDim.new(0, 8)

    Btn.MouseButton1Click:Connect(function()
        if data.Callback then
            pcall(data.Callback)
        end
    end)

    AddDescription(BtnFrame, data.Description)
end

--// Toggle
function Library:AddToggle(data)
    local Frame = Instance.new("Frame", MainFrame)
    Frame.Size = UDim2.new(0.9, 0, 0, data.Description and 55 or 35)
    Frame.BackgroundTransparency = 1
    Frame.LayoutOrder = 1

    local Toggle = Instance.new("TextButton", Frame)
    Toggle.Size = UDim2.new(1, 0, 0, 35)
    Toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    Toggle.Font = Enum.Font.Gotham
    Toggle.TextSize = 16
    Toggle.Text = (data.Name or "Toggle").." (OFF)"

    local corner = Instance.new("UICorner", Toggle)
    corner.CornerRadius = UDim.new(0, 8)

    local state = false
    Toggle.MouseButton1Click:Connect(function()
        state = not state
        Toggle.BackgroundColor3 = state and Color3.fromRGB(100, 180, 100) or Color3.fromRGB(60, 60, 60)
        Toggle.Text = (data.Name or "Toggle").." ("..(state and "ON" or "OFF")..")"
        if data.Callback then
            pcall(data.Callback, state, Toggle)
        end
    end)

    AddDescription(Frame, data.Description)
end

--// TextBox
function Library:AddTextbox(data)
    local Frame = Instance.new("Frame", MainFrame)
    Frame.Size = UDim2.new(0.9, 0, 0, data.Description and 60 or 40)
    Frame.BackgroundTransparency = 1
    Frame.LayoutOrder = 1

    local Label = Instance.new("TextLabel", Frame)
    Label.Size = UDim2.new(0.4, 0, 0, 30)
    Label.BackgroundTransparency = 1
    Label.Text = data.Name or "Textbox"
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.Font = Enum.Font.Gotham
    Label.TextSize = 14

    local Box = Instance.new("TextBox", Frame)
    Box.Size = UDim2.new(0.6, -5, 0, 30)
    Box.Position = UDim2.new(0.4, 5, 0, 0)
    Box.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    Box.TextColor3 = Color3.fromRGB(255, 255, 255)
    Box.PlaceholderText = data.Placeholder or "Digite..."
    Box.Font = Enum.Font.Gotham
    Box.TextSize = 14

    local corner = Instance.new("UICorner", Box)
    corner.CornerRadius = UDim.new(0, 6)

    Box.FocusLost:Connect(function(enterPressed)
        if enterPressed and data.Callback then
            pcall(data.Callback, Box.Text)
        end
    end)

    AddDescription(Frame, data.Description)
end

--// Retornar
return Library
